{% extends "layout/basic.html" %}

{% block content %}
<div class="row">
  <div class="medium-9 columns">
    <div class="section">
      <div class="section__body">
        <h1>{{ message }}</h1>
        
        {% if error %}
        <p style="color: red;">{{ error }}</p>
        {% endif %}
        
        <!-- 表单提交 -->
        <form method="POST" action="/questgen/mcq">
          <label for="input_text">{{ _('Input Text') }}:</label>
          <textarea id="input_text" name="input_text" required>{{ request.body.input_text or '' }}</textarea>

          <label for="max_questions">{{ _('Max Questions') }}:</label>
          <input type="number" id="max_questions" name="max_questions" required min="1" value="{{ request.body.max_questions or '' }}">

          <button type="submit" class="button">{{ _('Submit') }}</button>
        </form>

        <!-- 生成的问题 -->
        {% if questions %}
        <div id="result-container" style="margin-top: 20px;">
          <h2>{{ _('Generated Questions') }}:</h2>
          <ul class="supplementary list">
            {% for question in questions %}
            <li>
              <strong>{{ _('Question') }} {{ loop.index }}:</strong> {{ question.question_statement }}<br>
              <strong>{{ _('Answer') }}:</strong> {{ question.answer }}<br>
              <strong>{{ _('Options') }}:</strong>
              {% if question.options and question.options.length > 0 %}
                {{ question.options | join(', ') }}
              {% else %}
                {{ _('No options provided') }}
              {% endif %}
            </li>
            {% endfor %}
          </ul>
        </div>
        {% endif %}
      </div>
    </div>
  </div>

  <div class="medium-3 columns">
    <div class="section side">
      <div class="profile__bg user-profile-bg--1"></div>
      <div class="section__body">
        <div class="media sidebar-user-profile">
          <div class="media__left">
            <img src="{{ avatarUrl(handler.user.avatar, 80) }}" width="80" height="80" class="medium user-profile-avatar">
          </div>
          <div class="media__body">
            <p>{{ user.render_inline(handler.user, avatar=false, modbadge=false) }}</p>
            <a href="{{ url('generator_main') }}" class="button small">{{ _('Go to Question Generator') }}</a>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
{% endblock %}
