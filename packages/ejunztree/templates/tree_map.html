{% macro render_tree(branchHierarchy, parentKey="5", prefix="") %}
  {% if branchHierarchy[parentKey] %}
    <div class="tree-container">

      <!-- ðŸŒ³ Trunk åˆ†æ”¯ -->
      {% if branchHierarchy[parentKey].trunk %}
        <div class="branch-section">
          <h4>ðŸŒ³ Trunk</h4>
          <ul class="tree-view">
            <li class="trunk">
              <a href="{{ url('branch_detail', domainId=ddoc.domainId, docId=branchHierarchy[parentKey].trunk.docId) }}">
                {{ branchHierarchy[parentKey].trunk.title }}
              </a>
            </li>
          </ul>
        </div>
      {% endif %}

      <!-- ðŸŒ¿ Main Branches -->
      {% if branchHierarchy[parentKey].mainBranches %}
        <div class="branch-section">
          <h4>ðŸŒ¿ Main Branches</h4>
          <ul class="tree-view">
            {% for key, branch in branchHierarchy[parentKey].mainBranches %}
              <li class="main-branch">
                {{ prefix }}â”œâ”€â”€ 
                <a href="{{ url('branch_detail', domainId=ddoc.domainId, docId=branch.docId) }}">
                  {{ branch.title }}
                </a>

                <!-- ðŸŒ± Sub-Branches -->
                {% if branchHierarchy[parentKey].subBranches[key] %}
                  <ul class="sub-branch-list">
                    {% for subBranch in branchHierarchy[parentKey].subBranches[key] %}
                      <li class="sub-branch">
                        {{ prefix }}â”‚   â”œâ”€â”€ 
                        <a href="{{ url('branch_detail', domainId=ddoc.domainId, docId=subBranch.docId) }}">
                          {{ subBranch.title }}
                        </a>
                      </li>
                    {% endfor %}
                  </ul>
                {% endif %}
              </li>
            {% endfor %}
          </ul>
        </div>
      {% endif %}
      
    </div>
  {% endif %}
{% endmacro %}

<!-- ðŸŒ³ æ¸²æŸ“å®Œæ•´çš„ Tree -->
<div class="tree-view">
  {{ render_tree(branchHierarchy) }}
</div>
