{% extends "layout/basic.html" %}
{% block content %}
<div class="row">
  <div class="medium-9 columns">
    <div class="section">
      <div class="section__header">
        <h2 class="section__title">{{ _("Branch Details") }}</h2>
      </div>
      <div class="section__body">
        <h3>{{ _("Title") }}: {{ ddoc.title }}</h3>
        <p>{{ _("Content") }}: {{ ddoc.content }}</p>

        <h4>{{ _("Branch Information") }}</h4>
        <p>
          {{ _("Branch ID") }}: {{ ddoc.bid }} <br>
          {% if ddoc.parentId %}
            {{ _("Parent Branch ID") }}: {{ ddoc.parentId }} <br>
            <strong>{{ _("Type") }}:</strong> <span class="badge secondary">{{ _("Sub-Branch") }}</span>
          {% else %}
            <strong>{{ _("Type") }}:</strong> <span class="badge primary">{{ _("Trunk") }}</span>
          {% endif %}
        </p>

        <h4>{{ _("Linked Items") }}</h4>
        
        {% if docs and docs|length > 0 %}
        <div>
          <p>{{ _("LIDs (Linked Documents):") }}</p>
          <ul>
            {% for doc in docs %}
              <li>
                <a href="{{ url('docs_detail', domainId=ddoc.domainId, did=doc._id) }}">{{ _("Document ID:") }} {{ doc.title  }}</a>
              </li>
            {% endfor %}
          </ul>
        </div>
        {% else %}
        <p>{{ _("No linked documents available.") }}</p>
        {% endif %}

        {% if repos and repos|length > 0 %}
        <div>
          <p>{{ _("RIDs (Linked Resources):") }}</p>
          <ul>
            {% for repo in repos %}
              <li>
                <a href="{{ url('repo_detail',domainId=ddoc.domainId, did=repo._id) }}">{{ _("Resource ID:") }} {{ repo.title }}</a>
              </li>
            {% endfor %}
          </ul>
        </div>

        <h4>{{ _("Sub-Branches") }}</h4>
        {% if childrenBranches and childrenBranches|length > 0 %}
        <ul>
            {% for branch in childrenBranches %}
                <li>
                    <a href="{{ url('branch_detail', domainId=ddoc.domainId, docId=branch.docId) }}">
                        {{ branch.title }}
                    </a>
                </li>
            {% endfor %}
        </ul>
        {% else %}
          <p>{{ _("No sub-branches available.") }}</p>
          {% endif %}

        {% else %}
        <p>{{ _("No linked resources available.") }}</p>
        {% endif %}
      </div>
    </div>
  </div>

  <div class="medium-3 columns">
    <div class="section side">
      <div class="section__header">
        <h2 class="section__title">{{ _("Actions") }}</h2>
      </div>
      <div class="section__body">
        <a href="{{ url('branch_edit', domainId=ddoc.domainId, docId=ddoc.docId) }}" class="button primary expanded">
          {{ _('Edit Branch') }}
        </a>
        <a href="{{ url('tree_domain', domainId=ddoc.domainId) }}" class="button expanded">
          {{ _('Back to Tree') }}
        </a>

        {% if ddoc.parentId %}
          <a href="{{ url('branch_create_subbranch', domainId=ddoc.domainId, parentId=ddoc.bid) }}" class="button success expanded">
            {{ _('Create Sub-Branch') }}
          </a>
        {% else %}
          <a href="{{ url('branch_create_subbranch', domainId=ddoc.domainId, parentId=ddoc.bid) }}" class="button warning expanded">
            {{ _('Create First Sub-Branch') }}
          </a>
        {% endif %}
      </div>
    </div>
  </div>
</div>
{% endblock %}
