{% set page_name = "tool_detail" %}
{% extends "layout/basic.html" %}
{% block content %}
<div class="row">
  <div class="medium-12 columns">
    <div class="section">
      <div class="section__header">
        <h1 class="section__title">工具详情</h1>
        <div class="section__tools">
          <a href="{{ url('tool_domain', { domainId: domainId }) }}" class="button">
            <span class="icon icon-back"></span> 返回列表
          </a>
        </div>
      </div>
      <div class="section__body">
        <div class="typo">
          <h2>基本信息</h2>
          <table class="data-table">
            <tbody>
              <tr>
                <td class="col--key">工具名称</td>
                <td><code>{{ tool.name }}</code></td>
              </tr>
              <tr>
                <td class="col--key">描述</td>
                <td>{{ tool.description or '无描述' }}</td>
              </tr>
              <tr>
                <td class="col--key">来自 Edge</td>
                <td>
                  <a href="{{ url('edge_detail', { domainId: domainId, edgeId: edge._id }) }}">
                    {{ edge.name or ('Edge-' + edge.edgeId|string) }}
                  </a>
                  <span class="edge-status edge-status-{{ edge.status }}" style="margin-left: 10px;">
                    {% if edge.status == 'online' %}
                      在线
                    {% elif edge.status == 'offline' %}
                      离线
                    {% elif edge.status == 'working' %}
                      工作中
                    {% else %}
                      {{ edge.status }}
                    {% endif %}
                  </span>
                </td>
              </tr>
              <tr>
                <td class="col--key">Edge ID</td>
                <td><code>{{ edge._id }}</code></td>
              </tr>
              <tr>
                <td class="col--key">Tool ID</td>
                <td><code>{{ tool.toolId }}</code></td>
              </tr>
              <tr>
                <td class="col--key">创建时间</td>
                <td>{{ datetimeSpan(tool.createdAt)|safe }}</td>
              </tr>
              <tr>
                <td class="col--key">更新时间</td>
                <td>{{ datetimeSpan(tool.updatedAt)|safe }}</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>

    <div class="section">
      <div class="section__header">
        <h1 class="section__title">输入参数</h1>
      </div>
      <div class="section__body">
        <div class="typo">
          {% if tool.inputSchema %}
            <pre style="white-space: pre-wrap; word-wrap: break-word; background: #f5f5f5; padding: 15px; border-radius: 4px; overflow-x: auto;">{{ tool.inputSchema|tojson(indent=2) }}</pre>
          {% else %}
            <p class="text-gray">该工具没有定义输入参数。</p>
          {% endif %}
        </div>
      </div>
    </div>
  </div>
</div>
{% endblock %}

