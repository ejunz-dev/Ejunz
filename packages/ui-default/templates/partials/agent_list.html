{% import "components/paginator.html" as paginator with context %}
{% import "components/agent.html" as agent with context %}
{% import "components/nothing.html" as nothing with context %}
<div data-fragment-id="agent_list">
{% if not adocs.length %}
  {{ nothing.render('Sorry, there are no agents in the agent set.') }}
{% else %}
  {{ paginator.render(page, ppcount, position='top', add_qs=('q=' + qs if qs else '')) }}
  <table class="data-table hide-agent-tag">
    <colgroup>
      <col class="col--checkbox display-mode-hide">
      <col class="col--aid display-mode-hide">
    {% if handler.user.hasPriv(PRIV.PRIV_USER_PROFILE) %}
      <col class="col--status edit-mode-hide">
    {% endif %}
      <col class="col--name">
      <col class="col--files">

    </colgroup>
    <thead>
      <tr>
        <th class="col--checkbox display-mode-hide">
          <label class="compact checkbox">
            <input type="checkbox" name="select_all" data-checkbox-toggle="agent">
          </label>
        </th>

        {% if handler.user.hasPriv(PRIV.PRIV_USER_PROFILE) %}

        {% endif %}
        <th class="col--name">{{ _('Agent') }}
        <th class="col--files">{{ _('Files') }}

          </th>

      </tr>
    </thead>
    <tbody>
      {%- for adoc in adocs -%}
      {% set psdoc = psdict[adoc.domainId + '#' + adoc.docId] %}
      <tr data-aid="{{ adoc.docId }}">
        <td class="col--checkbox display-mode-hide">
          <label class="compact checkbox">
            <input type="checkbox" data-checkbox-group="agent" data-checkbox-range>
          </label>
        </td>
        <td class="col--aid display-mode-hide">{{ adoc.docId }}</td>
        {% if handler.user.hasPriv(PRIV.PRIV_USER_PROFILE) %}
          {% if psdoc['aid'] %}
            {{ agent.render_status_td(psdoc, aid_key='aid', class="edit-mode-hide", allDomain=adoc.domainId!==handler.args.domainId) }}
          {% else %}
            <td class="col--status record-status--border edit-mode-hide"></td>
          {% endif %}
        {% endif %}
        <td class="col--name col--agent-name">

          {{ agent.render_agent_title(adoc) }}
        </td>
        <td class="col--files">{{ adoc.files|length }}</td>
        
      </tr>
    {%- endfor -%}
    </tbody>
  </table>
  {{ paginator.render(page, ppcount, add_qs=('q=' + qs if qs else '')) }}
{% endif %}
</div>
