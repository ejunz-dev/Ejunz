{% extends "layout/basic.html" %}
{% block content %}
<div class="row">
  <div class="large-12 columns">
    <div class="section">
      <div class="section__header">
        <h1 class="section__title">{{ _("编辑思维导图") }}: {{ mindMap.title if mindMap else '' }}</h1>
      </div>
      <div class="section__body">
        <form method="post" id="mindmap-edit-form">
          <div class="form__row">
            <label class="form__label">{{ _("标题") }}</label>
            <input type="text" name="title" class="textbox" value="{{ mindMap.title if mindMap else '' }}" required>
          </div>
          <div class="form__row">
            <label class="form__label">{{ _("描述") }}</label>
            <textarea name="content" class="textbox" rows="5">{{ mindMap.content if mindMap else '' }}</textarea>
          </div>
          <div class="form__row">
            <button type="submit" class="button primary">{{ _("保存") }}</button>
            <a href="{{ url('mindmap_detail', domainId=mindMap.domainId if mindMap else domainId, docId=mindMap.docId if mindMap else '') }}" class="button secondary">{{ _("取消") }}</a>
            <button type="button" class="button danger" onclick="if(confirm('{{ _('确定要删除这个思维导图吗？') }}')) { 
              var form = document.createElement('form');
              form.method = 'post';
              form.action = '{{ url('mindmap_edit', domainId=mindMap.domainId if mindMap else domainId, docId=mindMap.docId if mindMap else '') }}';
              var input = document.createElement('input');
              input.type = 'hidden';
              input.name = 'operation';
              input.value = 'delete';
              form.appendChild(input);
              document.body.appendChild(form);
              form.submit();
            }">{{ _("删除") }}</button>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>
{% endblock %}

